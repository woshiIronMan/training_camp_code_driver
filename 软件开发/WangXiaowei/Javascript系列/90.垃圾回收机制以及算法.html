<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /*
            垃圾回收机制简称 GC
            js中内存分配和回收都是自动完善的，内存在不使用的时候会被垃圾回收器自动回收
        */

        /*
            内存的生命周期：
                js环境中分配的内存，一般有如下周期：
                    1、内存分配：当我们声明变量，函数，对象的时候，系统会自动为他们分配内存
                    2、内存的使用:即使读写内存，也就是使用变量，函数等
                    3、内存回收：使用完毕，有垃圾回收器自动回收不再使用内存

            说明：
                全局变量一般不会回收(关闭页面回收)
                一般情况下局部变量的值，不用了，会被自动回收掉

            内存泄漏：程序中分配的内存由于某种原因程序未释放或无法释放叫做内存泄漏
        */

        /*
            垃圾回收机制：
                1、标记清除
                2、引用计数
                3、标记整理
                4、分代回收
        */

        /*
            引用计数：
                1、引用计数是最简单的垃圾回收算法
                2、引用计数的核心思想是设置引用数，判断当前引用数是否为0
                3、引用计数算法的优点是简单，实现容易，缺点是循环引用的问题
                4、循环引用：两个对象相互引用，但是引用数不为0，导致内存泄漏
                5、解决循环引用的问题：手动解除引用，或者使用标记清除算法
        */

        /*
            标记清除：
                1、标记清除是目前主流的垃圾回收算法
                2、标记清除的核心思想是从根部出发，找到所有的可达对象，标记所有可达对象，然后清除所有未标记的对象
                3、标记清除的优点是可以解决循环引用的问题
                4、标记清除的缺点是会产生碎片化空间，导致内存的不连续，影响性能
        */

        /*
            标记整理：
                1、标记整理是标记清除的增强版
                2、标记整理的核心思想是标记清除的基础上，整理内存空间，使内存空间连续
                3、标记整理的优点是解决了标记清除的碎片化问题
                4、标记整理的缺点是性能不如标记清除
        */

        /*
            分代回收：
                1、分代回收是目前主流的垃圾回收算法
                2、分代回收的核心思想是根据对象的存活时间将内存分为不同的代，每一代使用不同的算法
                3、分代回收的优点是根据对象的存活时间，使用不同的算法，提高了垃圾回收的效率
                4、分代回收的缺点是实现复杂，性能消耗大
        */

        /*
            内存泄漏：
                1、内存泄漏是指程序中分配的内存由于某种原因程序未释放或无法释放
                2、内存泄漏的原因：
                    1、全局变量
                    2、闭包
                    3、循环引用
                    4、未清理的计时器
                    5、DOM节点
                    6、内存泄漏的检测：
                        1、使用工具检测
                        2、手动检测
        */

        /*
            内存泄漏的检测：
                1、使用工具检测：
                    1、chrome浏览器：
                        1、打开开发者工具，选择memory选项，点击start按钮，查看内存使用情况
                        2、查看内存快照，查看内存泄漏
                2、手动检测：
                    1、使用window.performance.memory对象，查看内存使用情况
        */

        /*
            内存泄漏的解决方案：
                1、全局变量：
                    1、使用let，const声明变量
                    2、使用模块化开发
                2、闭包：
                    1、手动解除引用
                    2、使用模块化开发
                3、循环引用：
                    1、手动解除引用
                    2、使用标记清除算法
                4、未清理的计时器：
                    1、使用clearInterval，clearTimeout清理计时器
                5、DOM节点：
                    1、手动清理DOM节点
                6、使用工具检测：
                    1、使用chrome浏览器检测内存泄漏
                7、手动检测：
                    1、使用window.performance.memory对象检测内存泄漏

        */
       
        /*

            堆栈空间分配区别;
                栈：由操作系统自动分配释放的函数的参数值，局部变量等，基本数据类型放到栈里
                堆：一般由程序员分配释放，若程序员不释放，程序结束时由操作系统回收，引用数据类型放到堆里

        */
    //    const arr = [1,2,3,4];
    //    arr = null

    let person = {
        age: 18,
        name: '张三'
    }
    let person2 = person
    person = 1
    p = null
       
    </script>
</body>
</html>