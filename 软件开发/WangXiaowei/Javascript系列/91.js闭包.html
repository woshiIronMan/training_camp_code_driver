<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /*
           目标：能说出什么是闭包
           概念：一个函数对周围状态的引用捆绑在一起，内层函数中访问到外层函数的作用域
           简单理解：闭包 = 内层函数+ 外层函数的变量
        */
        // function outer() {
        //     let a = 10
        //     function fn() {
        //         console.log(a)
        //     }
        //     fn()
        // }
        // outer()

        // 闭包作用：封闭数据，提供操作，外部也可以访问函数内部的变量

        /*

        */
       //简单写法
        // function outer() {
        //     let a = 10
        //     function fn() {
        //         console.log(a)
        //     }
        //     fn()
        // }
        // outer()

        //常见的闭包的形式 外部可以访问使用 函数内部的变量
        // function outer() {
        //     let a = 10
        //     function fn() {
        //         console.log(a)
        //     }
        //     // fn()
        //     return fn
        // }
        // // outer()         === fn  ===    function fn(){}
        // const fun = outer()
        // fun()       //调用函数 


        //闭包的应用  
        //   统计函数调用的次数
        // let i = 0
        // function fn(){
        //     i++
        //     console.log(`函数被调用了${i}次`)
        // }

        //因为 i 是全局变量，容易被修改
        // function conut(){
        //     let i = 0
        //     function fn(){
        //         i++
        //         console.log(`函数被调用了${i}次`)
        //     }
        //     return fn
        // }
        // const fun = conut()
        // fun()   //2
        // fun()   //3

        function conut(){
            let i = 0
            function fn(){
                i++
                console.log(`${i}次`)
            }
            return fn
        }
        const fun = conut()
        fun()
        fun()
        //实现了数据的私有，无法直接修改count

        /*
            怎么样理解闭包？
                闭包 = 内层函数 + 外层函数的变量

            闭包的作用？
                封闭数据，实现数据的私有，外部也可以访问函数内部的变量
                闭包很有用，因为它允许将函数与其操作的某些数据关联起来

            闭包可能引起的问题？
                内存泄漏
        */
        
    </script>
</body>

</html>