<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /*
            浅拷贝和深拷贝只针对引用类型
            浅拷贝：拷贝的是地址
            常见的方法
                拷贝的是对象“Object.assign() / 展开运算符{...obj}拷贝对象
                拷贝数组：Array.prototype.concat() 或者 [...arr]
        */

        /*
            仅复制第一层：基础类型（如 number, string）会被完整复制，但引用类型（如 object, array）只会复制其引用地址。

            共享嵌套结构：原对象和拷贝后的对象中的嵌套引用类型属性会指向同一块内存，修改其中一个会影响另一个。
        */
        const obj = {
            unname: '王晓伟',
            age: 18,
            family: {
                baby: '小屁孩'
            }
        }

        /*
            const obj = { a: 1, b: { c: 2 } };

                // 方法1：展开运算符（推荐）
                const copy1 = { ...obj };

                // 方法2：Object.assign()
                const copy2 = Object.assign({}, obj);
        
        */

        /*
            const arr = [1, 2, [3, 4]];

            // 方法1：展开运算符
            const copy1 = [...arr];

            // 方法2：slice()
            const copy2 = arr.slice();

            // 方法3：concat()
            const copy3 = [].concat(arr);
        */

        //浅拷贝
        // const o = { ...obj }
        // console.log(o)
        // o.age = 20
        // console.log(o)
        // console.log(obj)
        const o = {}
        Object.assign(o, obj)
        console.log(o)
        o.age = 20
        o.family.baby = '老孩子'
        console.log(obj)

        /*
             浅拷贝的使用场景
                需要快速复制简单对象，且无需关心嵌套引用。

                状态管理（如 React 更新状态）：触发组件重新渲染时，浅拷贝足够应对简单数据变更。

                函数参数传递：避免函数内部修改原始对象的第一层属性。
        */
        /*
            避免意外修改共享数据：浅拷贝后若修改嵌套对象，原数据也会被修改。

            深拷贝解决方案：当需要完全独立的副本时，使用深拷贝（如 lodash.cloneDeep() 或手动递归复制）。

            特殊数据类型问题：浅拷贝和深拷贝都可能丢失 Date、RegExp、函数等特殊类型的数据（深拷贝需特殊处理）。
        */

        /*
            1、直接复制和浅拷贝有什么区别？
                直接赋值的方法，只要是对象，都会相互影响，因为是直接拷贝对象栈里面的地址

                浅拷贝如果是一层对象，不相互影响，如果出现多层对象拷贝还会相互影响

            2、拷贝怎么理解？
                拷贝对象之后，里面的属性值是简单数据类型直接拷贝值
                如果属性只是引用数据类型则拷贝的是地址
        */
    </script>
</body>

</html>